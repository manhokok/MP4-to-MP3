#!/bin/bash

# Tạo thư mục /sdcard/mp3 nếu chưa tồn tại
MP3_DIR="/sdcard/mp3"
if [ ! -d "$MP3_DIR" ]; then
    mkdir "$MP3_DIR"
fi

# Hàm quét và di chuyển các file MP3
scan_and_move_mp3() {
    local DIR="$1"
    
    # Hiển thị thư mục đang quét
    echo "Đang quét thư mục $DIR..."

    # Duyệt qua tất cả các file và thư mục trong thư mục hiện tại
    for ITEM in "$DIR"/*; do
        if [ -d "$ITEM" ]; then
            # Nếu là thư mục, tiếp tục đệ quy
            scan_and_move_mp3 "$ITEM"
        elif [ -f "$ITEM" ] && [[ "$ITEM" == *.mp3 ]]; then
            # Nếu là file MP3, di chuyển vào thư mục /sdcard/mp3
            echo "Đã tìm thấy file MP3: $ITEM"
            mv "$ITEM" "$MP3_DIR"
        fi
    done
}

# Bắt đầu quét từ thư mục /sdcard
scan_and_move_mp3 "/sdcard"

echo "Quá trình quét và di chuyển hoàn tất!"
